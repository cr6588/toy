<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<div id="app">
	<div>
	username<input type="text" v-model="user.username">
	name<input type="text" v-model="user.name">
	</div>

<input type="button" @click="fetchData" value="搜索">
<table>
	<tr v-for="u in list" :key="u.id">
		<td>{{ u.id }}</td>
		<td>{{ u.username }}</td>
		<td>{{ u.name }}</td>
		<td><input type="button" @click="del(u.id)" value="删除"></td>
	</tr>
</table>
</div>
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/qs@6.10.3/dist/qs.js"></script>
<script type="text/javascript">
const qs = Qs
var app = new Vue({
	el: '#app',
	data: {
		user: {
			username: '',
			name: ''
		},
		list:[]
	},
	created () {
		this.fetchData()
	},
	methods: {
		fetchData () {
			axios.get('/api/user', {
				params: this.user
			}).then(res => {
				this.list = res.data
			})
		},
		del (id) {
			let data = {
				ids: [id]
			}
			axios.delete('/api/user', {
        params: data,
        paramsSerializer: params => {
          return qs.stringify(params, { indices: false })
        }
      }).then(res => {
				this.fetchData()
			})
		}
	}
})
</script>
</body>
</html>